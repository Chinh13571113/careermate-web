"use client";

import { useState, useEffect } from "react";
import Link from "next/link";
import Image from "next/image";
import { ClientHeader } from "@/modules/client/components/ClientHeader";
import { ClientFooter } from "@/modules/client/components/ClientFooter";
import { 
  CirclePlus, 
  Edit, 
  Mail, 
  MapPin,
  Phone,
  Calendar, 
  User, 
  Globe, 
  ChevronDown,
  X
} from "lucide-react";

// This Dialog component is not being used currently

export default function UpdateCVProfilePage() {
  // State for profile completion percentage
  const [profileCompletion] = useState(5);
  
  // Modal states
  const [aboutMeModal, setAboutMeModal] = useState(false);
  const [educationModal, setEducationModal] = useState(false);
  const [workExpModal, setWorkExpModal] = useState(false);
  const [skillsModal, setSkillsModal] = useState(false);
  const [skillType, setSkillType] = useState<"core" | "soft" | null>(null);
  const [languageModal, setLanguageModal] = useState(false);
  const [projectModal, setProjectModal] = useState(false);
  const [certificationModal, setCertificationModal] = useState(false);
  const [awardModal, setAwardModal] = useState(false);
  const [showSkillOptions, setShowSkillOptions] = useState(false);
  
  // Modal animation states
  const [modalAnimation, setModalAnimation] = useState(false);
  const [activeModal, setActiveModal] = useState<string | null>(null);

  // Handle closing modals with escape key
  useEffect(() => {
    const handleEscapeKey = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        closeAllModals();
      }
    };

    window.addEventListener('keydown', handleEscapeKey);
    return () => {
      window.removeEventListener('keydown', handleEscapeKey);
    };
  }, []);
  
  // Function to close all modals
  const closeAllModals = () => {
    // Set animation state to false first for smooth exit
    setModalAnimation(false);
    
    // Wait for animation to complete before closing modal
    setTimeout(() => {
      setAboutMeModal(false);
      setEducationModal(false);
      setWorkExpModal(false);
      setSkillsModal(false);
      setLanguageModal(false);
      setProjectModal(false);
      setCertificationModal(false);
      setAwardModal(false);
      setSkillType(null);
      setActiveModal(null);
      setShowSkillOptions(false);
    }, 300);
  };
  
  // Open modal handlers
  const openAboutMeModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening About Me Modal");
    setActiveModal("aboutMe");
    setAboutMeModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openEducationModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Education Modal");
    setActiveModal("education");
    setEducationModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openWorkExpModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Work Experience Modal");
    setActiveModal("workExp");
    setWorkExpModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openSkillsOptions = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Skills Options");
    setShowSkillOptions(true);
  };
  
  const openCoreSkillsModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Core Skills Modal");
    setActiveModal("skills");
    setSkillType("core");
    setSkillsModal(true);
    setShowSkillOptions(false);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openSoftSkillsModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Soft Skills Modal");
    setActiveModal("skills");
    setSkillType("soft");
    setSkillsModal(true);
    setShowSkillOptions(false);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openLanguageModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Language Modal");
    setActiveModal("language");
    setLanguageModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openProjectModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Project Modal");
    setActiveModal("project");
    setProjectModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openCertificationModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Certification Modal");
    setActiveModal("certification");
    setCertificationModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  const openAwardModal = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("Opening Award Modal");
    setActiveModal("award");
    setAwardModal(true);
    setTimeout(() => {
      setModalAnimation(true);
    }, 10);
  };
  
  // Form submission handlers
  const handleAboutMeSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleEducationSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleWorkExpSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleSkillsSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleLanguageSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleProjectSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleCertificationSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  const handleAwardSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    // Handle form submission
    closeAllModals();
  };
  
  return (
    <div className="min-h-screen bg-gray-50">
      <ClientHeader />
      
      <div className="container mx-auto py-8 px-4">
        <div className="flex flex-col lg:flex-row gap-6">
          
          {/* Left Sidebar */}
          <div className="w-full lg:w-1/4">
            <div className="bg-white rounded-lg shadow p-6 mb-6">
              <div className="flex items-center gap-3 mb-6">
                <span className="text-red-500">ðŸ‘‹</span>
                <h2 className="font-bold">Welcome</h2>
              </div>
              <h3 className="text-lg font-bold mb-6">Quang Nháº­t Huá»³nh Táº¥n</h3>
              
              <div className="space-y-4">
                <Link href="/dashboard" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
                      <rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
                      <rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
                      <rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" strokeWidth="2"/>
                    </svg>
                  </span>
                  <span>Dashboard</span>
                </Link>
                
                <Link href="/cv-attachment" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M19 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17 12H7V10H17V12ZM13 16H7V14H13V16ZM17 8H7V6H17V8Z" fill="currentColor"/>
                    </svg>
                  </span>
                  <span>CV Attachment</span>
                </Link>
                
                <Link href="/update-cvprofile" className="flex items-center gap-3 p-2 bg-gray-50 text-red-500 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <User size={16} />
                  </span>
                  <span>ITviec Profile</span>
                </Link>
                
                <Link href="/my-jobs" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 6H16V4C16 2.89 15.11 2 14 2H10C8.89 2 8 2.89 8 4V6H4C2.89 6 2 6.89 2 8V19C2 20.11 2.89 21 4 21H20C21.11 21 22 20.11 22 19V8C22 6.89 21.11 6 20 6ZM10 4H14V6H10V4ZM20 19H4V8H20V19Z" fill="currentColor"/>
                    </svg>
                  </span>
                  <span>My Jobs</span>
                </Link>
                
                <Link href="/job-invitation" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 18H4V8L12 13L20 8V18ZM12 11L4 6H20L12 11Z" fill="currentColor"/>
                    </svg>
                  </span>
                  <span>Job Invitation</span>
                  <span className="ml-auto bg-blue-500 text-white text-xs px-2 py-1 rounded-full">0</span>
                </Link>
                
                <Link href="/email-subscriptions" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <Mail size={16} />
                  </span>
                  <span>Email Subscriptions</span>
                </Link>
                
                <Link href="/notifications" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 22C13.1 22 14 21.1 14 20H10C10 21.1 10.9 22 12 22ZM18 16V11C18 7.93 16.36 5.36 13.5 4.68V4C13.5 3.17 12.83 2.5 12 2.5C11.17 2.5 10.5 3.17 10.5 4V4.68C7.63 5.36 6 7.92 6 11V16L4 18V19H20V18L18 16Z" fill="currentColor"/>
                    </svg>
                  </span>
                  <span>Notifications</span>
                </Link>
                
                <Link href="/settings" className="flex items-center gap-3 p-2 hover:bg-gray-100 rounded-md">
                  <span className="p-1.5 border border-gray-200 rounded">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M19.14 12.94C19.18 12.64 19.2 12.33 19.2 12C19.2 11.68 19.18 11.36 19.13 11.06L21.16 9.48C21.34 9.34 21.39 9.07 21.28 8.87L19.36 5.55C19.24 5.33 18.99 5.26 18.77 5.33L16.38 6.29C15.88 5.91 15.35 5.59 14.76 5.35L14.4 2.81C14.36 2.57 14.16 2.4 13.92 2.4H10.08C9.84 2.4 9.65 2.57 9.61 2.81L9.25 5.35C8.66 5.59 8.12 5.92 7.63 6.29L5.24 5.33C5.02 5.25 4.77 5.33 4.65 5.55L2.74 8.87C2.62 9.08 2.66 9.34 2.86 9.48L4.89 11.06C4.84 11.36 4.8 11.69 4.8 12C4.8 12.31 4.82 12.64 4.87 12.94L2.84 14.52C2.66 14.66 2.61 14.93 2.72 15.13L4.64 18.45C4.76 18.67 5.01 18.74 5.23 18.67L7.62 17.71C8.12 18.09 8.65 18.41 9.24 18.65L9.6 21.19C9.65 21.43 9.84 21.6 10.08 21.6H13.92C14.16 21.6 14.36 21.43 14.39 21.19L14.75 18.65C15.34 18.41 15.88 18.09 16.37 17.71L18.76 18.67C18.98 18.75 19.23 18.67 19.35 18.45L21.27 15.13C21.39 14.91 21.34 14.66 21.15 14.52L19.14 12.94ZM12 15.6C10.02 15.6 8.4 13.98 8.4 12C8.4 10.02 10.02 8.4 12 8.4C13.98 8.4 15.6 10.02 15.6 12C15.6 13.98 13.98 15.6 12 15.6Z" fill="currentColor"/>
                    </svg>
                  </span>
                  <span>Settings</span>
                </Link>
              </div>
            </div>
          </div>
          
          {/* Main Content */}
          <div className="w-full lg:w-1/2">
            {/* Profile Header */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <button className="absolute top-4 right-4 text-gray-500">
                <Edit size={18} />
              </button>
              
              <div className="flex items-center gap-4">
                <div className="relative">
                  <img 
                    src="https://i.pravatar.cc/100" 
                    alt="Profile" 
                    className="w-16 h-16 rounded-full object-cover"
                  />
                </div>
                <div>
                  <h1 className="text-2xl font-bold">Cristiano Ronaldo</h1>
                  <p className="text-[#6B7280]">Update your title</p>
                </div>
              </div>
              
              <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div className="flex items-center gap-3">
                  <Mail size={16} className="text-gray-400" />
                  <span>htqnhat280203@gmail.com</span>
                </div>
                <div className="flex items-center gap-3">
                  <Phone size={16} className="text-gray-400" />
                  <span className="text-[#6B7280]">Your phone number</span>
                </div>
                <div className="flex items-center gap-3">
                  <Calendar size={16} className="text-gray-400" />
                  <span className="text-[#6B7280]">Your date of birth</span>
                </div>
                <div className="flex items-center gap-3">
                  <User size={16} className="text-gray-400" />
                  <span className="text-[#6B7280]">Your gender</span>
                </div>
                <div className="flex items-center gap-3">
                  <MapPin size={16} className="text-gray-400" />
                  <span className="text-[#6B7280]">Your current address</span>
                </div>
                <div className="flex items-center gap-3">
                  <Globe size={16} className="text-gray-400" />
                  <span className="text-[#6B7280]">Your personal link</span>
                </div>
              </div>
            </div>
            
            {/* About Me Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">About Me</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openAboutMeModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Introduce your strengths and years of experience</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/about.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            
            {/* Education Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Education</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openEducationModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Share your background education</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/education.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            
            {/* Work Experience Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Work Experience</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openWorkExpModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Highlight detailed information about your job history</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/workexperience.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            
            {/* Skills Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Skills</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openSkillsOptions}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Showcase your skills and proficiencies</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/skills.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            {/* Foreign Language Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Foreign Languages</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openLanguageModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Showcase your language skills and proficiencies</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/forlanguae.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            {/* Highlight Project Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Highlight Projects</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openProjectModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Showcase your key projects and achievements</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/hlproject.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            {/* Certification Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Certifications</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openCertificationModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Showcase your certifications and achievements</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/certificates.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
            {/* Awards Section */}
            <div className="bg-white rounded-lg shadow p-6 mb-6 relative">
              <div className="flex justify-between items-center mb-4">
                <h2 className="text-xl font-bold">Awards</h2>
                <button 
                  type="button"
                  className="text-red-500 hover:text-red-600 transition-colors cursor-pointer"
                  onClick={openAwardModal}
                >
                  <CirclePlus size={24} />
                </button>
              </div>
              <p className="text-[#6B7280]">Showcase your awards and achievements</p>
              <div className="absolute -top-4 -right-4">
                <img src="/images/general/update-cvprofile/awards.png" alt="Icon" className="w-16 h-16 opacity-70 filter grayscale contrast-200 brightness-75" />
              </div>
            </div>
          </div>
          
          {/* Right Sidebar */}
          <div className="w-full lg:w-1/4">
            <div className="bg-white rounded-lg shadow p-6 mb-6">
              <h2 className="text-lg font-bold mb-4">Profile Strength</h2>
              
              <div className="relative h-32 w-32 mx-auto mb-6">
                <svg className="w-full h-full" viewBox="0 0 36 36">
                  <path
                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="#eeeeee"
                    strokeWidth="3"
                  />
                  <path
                    d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"
                    fill="none"
                    stroke="#ff3b30"
                    strokeWidth="3"
                    strokeDasharray={`${profileCompletion}, 100`}
                  />
                </svg>
                <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center">
                  <div className="text-2xl font-bold">{profileCompletion}%</div>
                  <div className="text-xs text-[#6B7280]">completed</div>
                </div>
              </div>
              
              <div className="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6">
                <div className="flex items-start gap-3">
                  <span className="text-red-500 font-bold">Complete profile to 70%</span>
                  <span className="text-gray-700">to generate CV template for IT professionals.</span>
                </div>
                <div className="flex justify-end">
                  <img src="/images/general/ad2.png" alt="CV Template" className="h-12 w-auto filter grayscale contrast-125 brightness-75" />
                </div>
              </div>
              
              <div className="space-y-4">
                <button 
                  className="flex items-center gap-2 w-full text-blue-600 hover:text-blue-700 font-medium"
                  onClick={openAboutMeModal}
                >
                  <CirclePlus size={20} />
                  <span>Add About me</span>
                </button>
                
                <button 
                  className="flex items-center gap-2 w-full text-blue-600 hover:text-blue-700 font-medium"
                >
                  <CirclePlus size={20} />
                  <span>Add Contact Information</span>
                </button>
                
                <button 
                  className="flex items-center gap-2 w-full text-blue-600 hover:text-blue-700 font-medium"
                  onClick={openWorkExpModal}
                >
                  <CirclePlus size={20} />
                  <span>Add Work Experience</span>
                </button>
                
                <div>
                  <button className="flex items-center gap-2 w-full text-gray-700 font-medium">
                    <ChevronDown size={20} />
                    <span>Add more information</span>
                  </button>
                </div>
                
                <button className="w-full py-3 bg-gray-500 text-white font-medium rounded-md hover:bg-red-600 transition">
                  Preview & Download CV
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <ClientFooter />
      
      {/* No separate overlay needed - will be handled in each modal */}
      
      {/* About Me Modal */}
      {/* About Me Modal */}
      {aboutMeModal && (
        <div 
          className={`fixed inset-0 z-50 transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          {/* Modal overlay */}
          <div 
            className="fixed inset-0 bg-gray-500/10 backdrop-blur-sm"
            onClick={(e) => {
              e.preventDefault();
              closeAllModals();
            }}
          ></div>
          
          {/* Modal content */}
          <div className="fixed inset-0 flex items-center justify-center">
            <div 
              className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
              onClick={(e) => e.stopPropagation()}
            >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">About Me</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <div className="mb-6">
                <div className="flex items-center gap-2 mb-2 text-amber-600">
                  <span className="p-1 rounded-full bg-amber-100">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                  </span>
                  <span className="font-medium">Tips:</span> 
                  <span>Summarize your professional experience, highlight your skills and your strengths.</span>
                </div>

                <div className="border border-gray-300 rounded-md p-3 mt-4">
                  <div className="flex gap-2 mb-3">
                    <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                      <span className="font-bold">B</span>
                    </button>
                    <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                      <span className="italic">I</span>
                    </button>
                    <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                      <span className="underline">U</span>
                    </button>
                    <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                      <span>â€¢</span>
                    </button>
                  </div>
                  <textarea 
                    className="w-full h-64 resize-none focus:outline-none" 
                    placeholder="Describe your professional experience, skills, and strengths..."
                  />
                </div>
                <div className="text-gray-500 text-sm mt-2">0/2500 characters</div>
              </div>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleAboutMeSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Education Modal */}
      {educationModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Education</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleEducationSubmit}>
                <div className="space-y-4">
                  <div>
                    <label className="block mb-1 font-medium">
                      School <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" 
                      required
                    />
                  </div>
                  
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block mb-1 font-medium">
                        Degree <span className="text-red-500">*</span>
                      </label>
                      <select 
                        className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      >
                        <option value="">Select degree</option>
                        <option value="bachelor">Bachelor</option>
                        <option value="master">Master</option>
                        <option value="phd">PhD</option>
                      </select>
                    </div>
                    
                    <div>
                      <label className="block mb-1 font-medium">
                        Major <span className="text-red-500">*</span>
                      </label>
                      <input 
                        type="text" 
                        className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      />
                    </div>
                  </div>
                  
                  <div>
                    <label className="flex items-center">
                      <input type="checkbox" className="mr-2" />
                      <span>I am currently studying here</span>
                    </label>
                  </div>
                  
                  <div className="grid grid-cols-2 gap-8">
                    <div>
                      <label className="block mb-1 font-medium">
                        From <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                    
                    <div>
                      <label className="block mb-1 font-medium">
                        To <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Additional details
                    </label>
                    <textarea 
                      className="w-full border border-gray-300 rounded-md p-2 h-24 resize-none focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                    />
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleEducationSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Work Experience Modal */}
      {workExpModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Work Experience</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleWorkExpSubmit}>
                <div className="space-y-4">
                  <div>
                    <label className="block mb-1 font-medium">
                      Job title <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Company <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="flex items-center">
                      <input type="checkbox" className="mr-2" />
                      <span>I am currently working here</span>
                    </label>
                  </div>
                  
                  <div className="grid grid-cols-2 gap-8">
                    <div>
                      <label className="block mb-1 font-medium">
                        From <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                    
                    <div>
                      <label className="block mb-1 font-medium">
                        To <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Description
                    </label>
                    <div className="mb-2 text-amber-600 flex items-center gap-2">
                      <span className="p-1 rounded-full bg-amber-100">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                      </span>
                      <span className="font-medium">Tips:</span> 
                      <span>Brief the company's industry, then detail your responsibilities and achievements. For projects, write on the "Project" field below.</span>
                    </div>
                    <div className="border border-gray-300 rounded-md p-3">
                      <div className="flex gap-2 mb-3">
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="font-bold">B</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="italic">I</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="underline">U</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span>â€¢</span>
                        </button>
                      </div>
                      <textarea 
                        className="w-full h-32 resize-none focus:outline-none" 
                        placeholder="Describe your responsibilities and achievements..."
                      />
                    </div>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleWorkExpSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Core Skills Modal */}
      {skillsModal && skillType === "core" && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Core Skills</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleSkillsSubmit}>
                <div className="space-y-4">
                  <div className="mb-2 text-amber-600 flex items-center gap-2">
                    <span className="p-1 rounded-full bg-amber-100">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                    </span>
                    <span className="font-medium">Tips:</span> 
                    <span>Organize your core skills into groups helps recruiters quickly understand your professional capabilities.</span>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Group name <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      placeholder="Core Skills"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">List skills (0/20)</label>
                    <div className="flex gap-2 items-center">
                      <select className="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        <option>Search skills</option>
                      </select>
                      <select className="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        <option>Select experience</option>
                      </select>
                      <button className="bg-gray-500 text-white p-2 rounded-md hover:bg-red-600">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  
                  <div className="flex flex-col items-center justify-center py-8 text-gray-400">
                    <div className="bg-gray-100 rounded-full p-4 mb-4">
                      <X size={32} />
                    </div>
                    <p>No items selected</p>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleSkillsSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Soft Skills Modal */}
      {skillsModal && skillType === "soft" && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Soft Skills</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleSkillsSubmit}>
                <div className="space-y-4">
                  <div className="mb-2 text-amber-600 flex items-center gap-2">
                    <span className="p-1 rounded-full bg-amber-100">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                    </span>
                    <span className="font-medium">Tips:</span> 
                    <span>Highlight soft skills that demonstrate how you add value beyond professional abilities.</span>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Group name <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      placeholder="Soft Skills"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">List skills (0/20)</label>
                    <div className="flex gap-2 items-center">
                      <input 
                        type="text" 
                        className="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        placeholder="Enter skill"
                      />
                      <button className="bg-gray-500 text-white p-2 rounded-md hover:bg-red-600">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  
                  <div className="flex flex-col items-center justify-center py-8 text-gray-400">
                    <div className="bg-gray-100 rounded-full p-4 mb-4">
                      <X size={32} />
                    </div>
                    <p>No items selected</p>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleSkillsSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Skill Type Selector Modal */}
      {showSkillOptions && (
        <div className="fixed inset-0 z-50 flex items-center justify-center pointer-events-none">
          <div 
            className="fixed inset-0 bg-gray-500/10 backdrop-blur-sm pointer-events-auto"
            onClick={closeAllModals}
          />
          <div className="bg-white rounded-lg shadow-xl w-64 overflow-hidden relative z-10 pointer-events-auto">
            <div className="p-4 border-b">
              <h3 className="text-lg font-bold">Select Skill Type</h3>
            </div>
            <div className="p-4 space-y-2">
              <button 
                className="w-full text-left p-2 hover:bg-gray-100 rounded-md"
                onClick={openCoreSkillsModal}
              >
                Core Skills
              </button>
              <button 
                className="w-full text-left p-2 hover:bg-gray-100 rounded-md"
                onClick={openSoftSkillsModal}
              >
                Soft Skills
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Foreign Language Modal */}
      {languageModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Foreign Language</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleLanguageSubmit}>
                <div className="space-y-4">
                  <div>
                    <label className="block mb-1 font-medium">List languages (0/5)</label>
                    <div className="flex gap-2 items-center">
                      <select className="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        <option>Search language</option>
                      </select>
                      <select className="flex-grow border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        <option>Select level</option>
                        <option>Basic</option>
                        <option>Intermediate</option>
                        <option>Advanced</option>
                        <option>Fluent</option>
                      </select>
                      <button className="bg-gray-500 text-white p-2 rounded-md hover:bg-red-600">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                      </button>
                    </div>
                  </div>
                  
                  <div className="flex flex-col items-center justify-center py-8 text-gray-400">
                    <div className="bg-gray-100 rounded-full p-4 mb-4">
                      <X size={32} />
                    </div>
                    <p>No items selected</p>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleLanguageSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Highlight Project Modal */}
      {projectModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Highlight Project</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleProjectSubmit}>
                <div className="space-y-4">
                  <div className="mb-2 text-amber-600 flex items-center gap-2">
                    <span className="p-1 rounded-full bg-amber-100">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                    </span>
                    <span className="font-medium">Tips:</span> 
                    <span>Share the project that relates to your skills and capabilities, and be sure to include project details, your role, technologies, and team size.</span>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Project Name <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="flex items-center">
                      <input type="checkbox" className="mr-2" />
                      <span>I am working on this project</span>
                    </label>
                  </div>
                  
                  <div className="grid grid-cols-2 gap-8">
                    <div>
                      <label className="block mb-1 font-medium">
                        Start date <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                    
                    <div>
                      <label className="block mb-1 font-medium">
                        End date <span className="text-red-500">*</span>
                      </label>
                      <div className="grid grid-cols-2 gap-4">
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Month</option>
                          {Array.from({length: 12}, (_, i) => (
                            <option key={i} value={i+1}>{i+1}</option>
                          ))}
                        </select>
                        
                        <select 
                          className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                          required
                        >
                          <option value="">Year</option>
                          {Array.from({length: 50}, (_, i) => (
                            <option key={i} value={2025-i}>{2025-i}</option>
                          ))}
                        </select>
                      </div>
                    </div>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Description
                    </label>
                    <div className="border border-gray-300 rounded-md p-3">
                      <div className="flex gap-2 mb-3">
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="font-bold">B</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="italic">I</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="underline">U</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span>â€¢</span>
                        </button>
                      </div>
                      <textarea 
                        className="w-full h-32 resize-none focus:outline-none" 
                        placeholder="Describe your project, role, technologies used, team size..."
                      />
                    </div>
                    <div className="flex justify-end mt-2">
                      <button className="text-gray-500 text-sm">
                        Insert template
                      </button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleProjectSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Certificates Modal */}
      {certificationModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Certificates</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleCertificationSubmit}>
                <div className="space-y-4">
                  <div>
                    <label className="block mb-1 font-medium">
                      Certificate Name <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Organization <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Issue date <span className="text-red-500">*</span>
                    </label>
                    <div className="grid grid-cols-2 gap-4">
                      <select 
                        className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      >
                        <option value="">Month</option>
                        {Array.from({length: 12}, (_, i) => (
                          <option key={i} value={i+1}>{i+1}</option>
                        ))}
                      </select>
                      
                      <select 
                        className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      >
                        <option value="">Year</option>
                        {Array.from({length: 50}, (_, i) => (
                          <option key={i} value={2025-i}>{2025-i}</option>
                        ))}
                      </select>
                    </div>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Certificate URL
                    </label>
                    <input 
                      type="url" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      placeholder="https://"
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Description
                    </label>
                    <div className="border border-gray-300 rounded-md p-3">
                      <div className="flex gap-2 mb-3">
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="font-bold">B</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="italic">I</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="underline">U</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span>â€¢</span>
                        </button>
                      </div>
                      <textarea 
                        className="w-full h-32 resize-none focus:outline-none" 
                        placeholder="Describe your certification..."
                      />
                    </div>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleCertificationSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
      
      {/* Awards Modal */}
      {awardModal && (
        <div 
          className={`fixed inset-0 z-50 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${modalAnimation ? 'opacity-100' : 'opacity-0'}`}
        >
          <div 
            className={`bg-white rounded-lg shadow-xl w-full max-w-3xl transition-all duration-300 overflow-hidden pointer-events-auto ${modalAnimation ? 'transform scale-100 translate-y-0' : 'transform scale-95 -translate-y-4'}`}
            onClick={(e) => e.stopPropagation()}
          >
            <div className="flex justify-between items-center p-4 border-b">
              <h3 className="text-xl font-bold">Awards</h3>
              <button 
                className="text-gray-500 hover:text-gray-700 focus:outline-none" 
                onClick={closeAllModals}
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="p-6">
              <form onSubmit={handleAwardSubmit}>
                <div className="space-y-4">
                  <div>
                    <label className="block mb-1 font-medium">
                      Awards name <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Award organization <span className="text-red-500">*</span>
                    </label>
                    <input 
                      type="text" 
                      className="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                      required
                    />
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Issue date <span className="text-red-500">*</span>
                    </label>
                    <div className="grid grid-cols-2 gap-4">
                      <select 
                        className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      >
                        <option value="">Month</option>
                        {Array.from({length: 12}, (_, i) => (
                          <option key={i} value={i+1}>{i+1}</option>
                        ))}
                      </select>
                      
                      <select 
                        className="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                        required
                      >
                        <option value="">Year</option>
                        {Array.from({length: 50}, (_, i) => (
                          <option key={i} value={2025-i}>{2025-i}</option>
                        ))}
                      </select>
                    </div>
                  </div>
                  
                  <div>
                    <label className="block mb-1 font-medium">
                      Description
                    </label>
                    <div className="mb-2 text-amber-600 flex items-center gap-2">
                      <span className="p-1 rounded-full bg-amber-100">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                          <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                        </svg>
                      </span>
                      <span className="font-medium">Tips:</span> 
                      <span>Shortly describe the relevant category (innovation, leadership,...) or the reason for the award.</span>
                    </div>
                    <div className="border border-gray-300 rounded-md p-3">
                      <div className="flex gap-2 mb-3">
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="font-bold">B</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="italic">I</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span className="underline">U</span>
                        </button>
                        <button className="p-1 border border-gray-300 rounded hover:bg-gray-100">
                          <span>â€¢</span>
                        </button>
                      </div>
                      <textarea 
                        className="w-full h-32 resize-none focus:outline-none" 
                        placeholder="Describe your award..."
                      />
                    </div>
                    <div className="text-gray-500 text-sm mt-2">0/2500 characters</div>
                  </div>
                </div>
              </form>
            </div>
            
            <div className="flex justify-end gap-3 p-4 border-t bg-gray-50">
              <button 
                className="px-5 py-2 text-gray-600 hover:text-gray-800 font-medium rounded"
                onClick={closeAllModals}
              >
                Cancel
              </button>
              <button 
                className="px-5 py-2 bg-gray-500 text-white font-medium rounded hover:bg-red-600"
                onClick={handleAwardSubmit}
              >
                Save
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}